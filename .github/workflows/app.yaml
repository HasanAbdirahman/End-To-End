# name: Deploy to Kubernetes

# on:
#   push:
#     branches:
#       - main

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4

#       - name: Set up Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: 18

#       - name: Install dependencies and build frontend
#         run: |
#           cd frontend
#           npm install
#           npm run build

#       - name: Set up kubectl
#         uses: azure/setup-kubectl@v3
#         with:
#           version: 'latest'

#       - name: Create Docker registry secret in Kubernetes
#         env:
#           DOCKER_USERNAME: ${{ secrets.DOCKER_USERNAME }}
#           DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
#         run: |
#           cd Kubernetes
#           kubectl create secret docker-registry myregistrykey \
#             --docker-server=https://index.docker.io/v1/ \
#             --docker-username=$DOCKER_USERNAME \
#             --docker-password=$DOCKER_PASSWORD \
#             --docker-email=dummy@example.com \
#             --namespace=default \
#             --dry-run=client -o yaml | kubectl apply -f -
      
#       - name: Deploying Kubernetes Files
#         run: | 
#           cd Kubernetes
#           kubectl apply -f deployment.yaml
#           kubectl apply -f ingress.yaml
#           kubectl apply -f Service.yaml